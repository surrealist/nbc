@model NBC.Web.Areas.Admin.ViewModels.SVActivityYearsIndexVM

@{
    Layout = null;
    
}


<body>
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/jqueryval")


    @using (Html.BeginForm("Create", "SVActivityYears", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
    {
        @Html.AntiForgeryToken()

        <div class="form-horizontal">

            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            <div class="form-group">
                @Html.Label("ปีงบประมาณ ", htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    <select class="selectYear">
                        <option selected value="0">กรุณาเลือก</option>
                        
                    </select>
                </div>

            </div>
            <div class="form-group">
                @Html.Label("หน่วย กสอ ", htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    <select class="selectSVs">
                        <option selected value="0">กรุณาเลือก</option>
                    </select>
                </div>

            </div>
            @*<div class="form-group">
                @Html.Label("กิจกรรม ", htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    <select class="selectActitivityType">
                        <option selected value="0">กรุณาเลือก</option>
                    </select>
                </div>

            </div>*@
            <div class="form-group" hidden="hidden">
                @Html.LabelFor(model => model.Year_ID, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.Year_ID, new { htmlAttributes = new { @class = "Year_Id form-control" } })
                    @Html.ValidationMessageFor(model => model.Year_ID, "", new { @class = "text-danger" })
                </div>
            </div>
            <div class="form-group" hidden="hidden">
                @Html.LabelFor(model => model.SV_ID, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.SV_ID, new { htmlAttributes = new { @class = "SV_Id  form-control" } })
                    @Html.ValidationMessageFor(model => model.SV_ID, "", new { @class = "text-danger" })
                </div>
            </div>
            <div class="form-group">
                @Html.Label("กิจกรรม NBC", htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.NBCTarget, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.NBCTarget, "", new { @class = "text-danger" })
                </div>
            </div>
            <div class="form-group">
                @Html.Label("กิจกรรมบ่มเพาะ", htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.INCUTarget, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.INCUTarget, "", new { @class = "text-danger" })
                </div>
            </div>



            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <input type="submit" value="บันทึก" class="openCreateBox btn btn-primary btn-xs" />
                    @Html.ActionLink("ย้อนกลับ", "Index", "SVActivityYears", null, new { @class = "btn btn-primary btn-xs" })
                </div>
               
            </div>
        </div>
    }

   
</body>
<script type="text/javascript" charset="utf8" src="https://code.jquery.com/jquery-1.12.3.js"></script>
<script>
    $(document).ready(function () {
        var selectedId = $('.Year_Id').val();
        var url = "/Admin/SVActivityYears/DDLYear";
        var $jsontwo = $('.selectYear');
        $jsontwo.empty();
        $jsontwo.append($("<option selected />").val(-1).text("กรุณาเลือก"));
        $.ajax({
            url: url,
            async: false,
            dataType: 'json',
            success: function (data) {
                var obj = data;
                $.each(obj, function (index, value) {
                    var name = value["Name"];
                    var id = value["Id"];
                    if (selectedId == id) {
                        $jsontwo.append($("<option selected />").val(id).text(name));

                    }
                    else {
                        $jsontwo.append($("<option />").val(id).text(name));
                    }
                });
                //var max = getMax(data, 'Id');

                //alert(max.Id);
            }
        });
        var selectedId = $('.SV_Id').val();
        var url = "/Admin/SVActivityYears/DDLSVs";
        var $jsontwo = $('.selectSVs');
        $jsontwo.empty();
        $jsontwo.append($("<option selected />").val(-1).text("กรุณาเลือก"));
        $.ajax({
            url: url,
            async: false,
            dataType: 'json',
            success: function (data) {
                var obj = data;
                $.each(obj, function (index, value) {
                    var name = value["Name"];
                    var id = value["Id"];
                    if (selectedId == id) {
                        $jsontwo.append($("<option selected />").val(id).text(name));

                    }
                    else {
                        $jsontwo.append($("<option />").val(id).text(name));
                    }
                });
                //var max = getMax(data, 'Id');

                //alert(max.Id);
            }
        });
        var selectedId = $('.ActitivityType_Id').val();
        var url = "/Admin/SVActivityYears/DDLActivityType";
        var $jsontwo = $('.selectActitivityType');
        $jsontwo.empty();
        $jsontwo.append($("<option selected />").val(-1).text("กรุณาเลือก"));
        $.ajax({
            url: url,
            async: false,
            dataType: 'json',
            success: function (data) {
                var obj = data;
                $.each(obj, function (index, value) {
                    var name = value["Name"];
                    var id = value["Id"];
                    if (selectedId == id) {
                        $jsontwo.append($("<option selected />").val(id).text(name));

                    }
                    else {
                        $jsontwo.append($("<option />").val(id).text(name));
                    }
                });
                //var max = getMax(data, 'Id');

                //alert(max.Id);
            }
        });
    });
    $('.selectYear').change(function () {
        var YId = $('.selectYear').val();
        $('.Year_Id').val(YId);

    });
    $('.selectSVs').change(function () {
        var YId = $('.selectSVs').val();
        $('.SV_Id').val(YId);

    });
    $('.selectActitivityType').change(function () {
        var YId = $('.selectActitivityType').val();
        $('.ActitivityType_Id').val(YId);

    });

</script>

